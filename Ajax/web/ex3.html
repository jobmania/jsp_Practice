<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AJAX 연습</title>
</head>
<body>
    <h1> id입력시 회원조회</h1>
    아이디 입력 : <input id=input onkeyup="sendServer()" type="text">
<!--    <button onclick="sendServer()">계산하기</button>-->
    <div id="output"></div>

    <script>
        // 버튼을 누르면 ajax로 서버주소로 http 요청하기( 비동기: 백그라운드 실행)
        // const input = document.querySelector('input[type="text"]');
        const input = document.getElementById('input');
        const output = document.getElementById('output');  //id를 통해 엘리먼트를 반환한다. 만약 document에 구체적인 ID의 엘리먼트가 없다면 null을 반환한다.
        const request = new XMLHttpRequest(); /// ajax 객체 생성


        //
        function sendServer(){
            let id = input.value; // 입력값
            let url = "getDB.jsp?id="+ id ;  // AJAX 요청 주소
            request.onreadystatechange = getInfo;  //함수 getInfo()를 아래 정의
            request.open('GET', url, true);
            request.send();// 보내기!

        }

        function getInfo() { //id로 db 검색 결과를 받아서 출력
            if (request.readyState == 4 && request.status == 200) {
                let info = request.responseText;
                output.textContent = info;
            }
        }

    </script>
</body>
</html>